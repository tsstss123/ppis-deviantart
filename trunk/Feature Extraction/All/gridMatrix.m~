% input: 
% matrix is an NxM matrix.
% X is the amount of cells into which the matrix needs to be split in the
% first
% dimension. Y is the amount of cells into which the matrix needs to be
% split in the second dimension
% output: matrix containing the avg of each grid cell
function avgGrid = gridCellsAvg(matrix,X,Y)
    xSize = size(matrix,1);
    ySize = size(matrix,2);
    xCellSize = round(xSize / X);
    yCellSize = round(ySize / Y);
    
    avgGrid = zeros(X,Y);
    for i = 1:X-1
       for j = 1:Y-1
           startPixelX = ((i-1)*xCellSize)+1;
           startPixelY = ((j-1)*yCellSize)+1; 
           
            
           if(endPixelX > size(matrix,1))
               endPixelX = size(matrix,1);
           else
               endPixelX = startPixelX+xCellSize;
           end
           if(endPixelY > size(matrix,2)
               endPixelY = size(matrix,2);
           else
               endPixelY = startPixelY+yCellSize;
           end
           avgGrid(i,j) = mean(mean(matrix(startPixelX:endPixelX,startPixelY:endPixelY) ));
       end

    end
   
    
    
    startPixelX = ((X-1)*xCellSize)+1;
    startPixelY = ((Y-1)*yCellSize)+1;        
    avgGrid(X,Y) = matrix(startPixelX:end,startPixelY,end);

end